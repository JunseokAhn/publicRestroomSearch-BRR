package global.sesoc.brr.util;

import lombok.Data;

/**
 * ê²Œì‹œ?Œ ?˜?´ì§? ì²˜ë¦¬ ?´?˜?Š¤
 */
@Data
public class PageNavigator {
	// ?˜?´ì§? ê´?? ¨ ? •ë³?
	private int countPerPage; // ?˜?´ì§??‹¹ ê¸?ëª©ë¡ ?ˆ˜
	private int pagePerGroup; // ê·¸ë£¹?‹¹ ?˜?´ì§? ?ˆ˜
	private int currentPage; // ?˜„?¬ ?˜?´ì§? (ìµœê·¼ ê¸??´ 1ë¶??„° ?‹œ?‘)
	private int totalRecordsCount; // ? „ì²? ê¸? ?ˆ˜
	private int totalPageCount; // ? „ì²? ?˜?´ì§? ?ˆ˜
	private int currentGroup; // ?˜„?¬ ê·¸ë£¹ (ìµœê·¼ ê·¸ë£¹?´ 0ë¶??„° ?‹œ?‘)
	private int startPageGroup; // ?˜„?¬ ê·¸ë£¹?˜ ì²? ?˜?´ì§?
	private int endPageGroup; // ?˜„?¬ ê·¸ë£¹?˜ ë§ˆì?ë§? ?˜?´ì§?
	private int startRecord; // ? „ì²? ? ˆì½”ë“œ ì¤? ?˜„?¬ ?˜?´ì§? ì²? ê¸??˜ ?œ„ì¹? (0ë¶??„° ?‹œ?‘)


	public PageNavigator() {
		// TODO Auto-generated constructor stub
	}

	public PageNavigator(int currentPage, int totalRecordsCount) {
		// ?˜„?¬ ?˜?´ì§?, ? „ì²? ê¸? ?ˆ˜ë¥? ? „?‹¬ë°›ìŒ
		this.countPerPage = 10; // ?˜?´ì§??‹¹ ê¸? ?ˆ˜
		this.pagePerGroup = 5; // ê·¸ë£¹?‹¹ ?˜?´ì§? ?ˆ˜
		this.totalRecordsCount = totalRecordsCount;

		// ? „ì²? ?˜?´ì§? ?ˆ˜
		totalPageCount = (totalRecordsCount + countPerPage - 1) / countPerPage;

		// ? „?‹¬?œ ?˜„?¬ ?˜?´ì§?ê°? 1ë³´ë‹¤ ?‘?œ¼ë©? ?˜„?¬?˜?´ì§?ë¥? 1?˜?´ì§?ë¡? ì§?? •
		if (currentPage < 1)
			currentPage = 1;
		// ? „?‹¬?œ ?˜„?¬ ?˜?´ì§?ê°? ë§ˆì?ë§? ?˜?´ì§?ë³´ë‹¤ ?¬ë©? ?˜„?¬?˜?´ì§?ë¥? ë§ˆì?ë§? ?˜?´ì§?ë¡? ì§?? •
		if (currentPage > totalPageCount)
			currentPage = totalPageCount;

		this.currentPage = currentPage;

		// ?˜„?¬ ê·¸ë£¹
		currentGroup = (currentPage - 1) / pagePerGroup;

		// ?˜„?¬ ê·¸ë£¹?˜ ì²? ?˜?´ì§?
		startPageGroup = currentGroup * pagePerGroup + 1;
		// ?˜„?¬ ê·¸ë£¹?˜ ì²? ?˜?´ì§?ê°? 1ë³´ë‹¤ ?‘?œ¼ë©? 1ë¡? ì²˜ë¦¬
		startPageGroup = startPageGroup < 1 ? 1 : startPageGroup;
		// ?˜„?¬ ê·¸ë£¹?˜ ë§ˆì?ë§? ?˜?´ì§?
		endPageGroup = startPageGroup + pagePerGroup - 1;
		// ?˜„?¬ ê·¸ë£¹?˜ ë§ˆì?ë§? ?˜?´ì§?ê°? ? „ì²? ?˜?´ì§? ?ˆ˜ë³´ë‹¤ ?‘?œ¼ë©? ? „ì²´í˜?´ì§? ?ˆ˜ë¥? ë§ˆì?ë§‰ìœ¼ë¡?.
		endPageGroup = endPageGroup < totalPageCount ? endPageGroup : totalPageCount;

		// ? „ì²? ? ˆì½”ë“œ ì¤? ?˜„?¬ ?˜?´ì§? ì²? ê¸??˜ ?œ„ì¹?
		startRecord = (currentPage - 1) * countPerPage;
	}

}
